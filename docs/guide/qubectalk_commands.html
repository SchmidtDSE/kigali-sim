<html lang="en-GB">
  <head>
    <title>QubecTalk Reference: Commands</title>
    <link href="/guide/guide.css?v=EPOCH" rel="stylesheet" type="text/css" />
    <link href="/third_party/prism-tomorrow.min.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <a href="#main" class="skip-link">Skip to main content</a>
    <header>
      This reference is part of the <a href="/guide">guide</a> for the
      <a href="/">Kigali Sim</a>.
    </header>
    <main id="main">
      <h1>QubecTalk Reference: Commands</h1>

      <p>
        Commands are the executable statements within QubecTalk stanzas that define substance properties, set values, and configure policies.
      </p>

      <details>
        <summary>Contents</summary>
        <ul>
          <li><a href="#assume">Assume</a></li>
          <li><a href="#cap">Cap</a></li>
          <li><a href="#change">Change</a></li>
          <li><a href="#define">Define</a></li>
          <li><a href="#enable">Enable</a></li>
          <li><a href="#equals">Equals (GWP)</a></li>
          <li><a href="#floor">Floor</a></li>
          <li><a href="#get">Get</a></li>
          <li><a href="#initial-charge">Initial Charge</a></li>
          <li><a href="#recharge">Recharge</a></li>
          <li><a href="#recover">Recover</a></li>
          <li><a href="#replace">Replace</a></li>
          <li><a href="#retire">Retire</a></li>
          <li><a href="#set">Set</a></li>
        </ul>
      </details>

      <section id="assume">
        <h2>Assume</h2>

        <p><strong>Purpose:</strong> Controls sales carryover behavior, particularly useful for bank tracking scenarios.</p>

        <p><strong>Syntax:</strong> <code>assume [no|only recharge|continued] streamName during years startYear to endYear</code></p>

        <p><strong>Available Streams:</strong> domestic, import, export, sales, bank, equipment</p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">assume no domestic during year 2030
assume only recharge sales during years 2025 to onwards
assume continued import
assume only recharge bank during years 3 to onwards</code></pre>

        <p><strong>Behavior:</strong></p>
        <ul>
          <li><code>assume no</code> - Sets stream to 0 kg (zero all sales)</li>
          <li><code>assume only recharge</code> - Sales only cover recharge needs, no new equipment</li>
          <li><code>assume continued</code> - Continue from previous year (default behavior)</li>
        </ul>
      </section>

      <section id="cap">
        <h2>Cap</h2>

        <p><strong>Purpose:</strong> Limits consumption to specified levels, optionally with displacement to alternative substances.</p>

        <p><strong>Syntax:</strong></p>
        <pre><code class="language-qubectalk">cap streamName to amount during years startYear to endYear
cap streamName to amount displacing "substanceName"|stream during years startYear to endYear
cap streamName to amount displacing by volume "substanceName"|stream during years startYear to endYear
cap streamName to amount displacing by units "substanceName"|stream during years startYear to endYear</code></pre>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">cap sales to 80% during years 2027 to 2030
cap domestic to 0 mt displacing "R-600a" during years 2031 to onwards
cap import to 50% during years 2028 to 2032</code></pre>

        <h3>Displacement Types</h3>

        <p>When using displacement, you can control how the displaced demand is calculated:</p>

        <ul>
          <li><strong>displacing</strong> means equivalent displacement (default). This maintains the same quantity in the units last specified. If last value was in kg, displaces by kg. If last value was in units, displaces by units.</li>
          <li><strong>displacing by volume</strong> means volume-based displacement. This always displaces by substance mass (kg), converting from units if necessary using initial charge values. May result in different equipment counts. In other words, this assumes 1 kg of the original substance is displaced by 1 kg of the new substance.</li>
          <li><strong>displacing by units</strong> means units-based displacement. This always displaces by equipment units, converting from kg if necessary using initial charge values. Maintains equipment population. In other words, this assumes 1 unit of equipment using the original substance is displaced by 1 unit of equipment using the new substance.</li>
        </ul>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk"># Equivalent displacement (default behavior)
cap sales to 80% displacing "R-600a" during years 2027 to 2030

# Volume-based displacement (always use kg, regardless of spec)
cap sales to 50 units displacing by volume "R-600a" during years 2027 to 2030
# Result: 50 units ร 1 kg/unit = 50 kg displaced to R-600a

# Units-based displacement (always use units, regardless of spec)
cap sales to 100 kg displacing by units "R-600a" during years 2027 to 2030
# Result: 100 kg รท 1 kg/unit = 100 units displaced to R-600a</code></pre>

        <p><strong>Note:</strong> When using <code>displacing by volume</code>, total substance mass is preserved but equipment counts may change. When using <code>displacing by units</code>, equipment population is preserved but substance mass may change. Use <code>displacing by units</code> when equipment tracking is critical (e.g., equipment bank management). Use <code>displacing by volume</code> when substance consumption limits are the primary concern.</p>
      </section>

      <section id="change">
        <h2>Change</h2>

        <p><strong>Purpose:</strong> Applies growth or decline rates to consumption over time.</p>

        <p><strong>Syntax:</strong> <code>change streamName by percentage % / year during years startYear to endYear</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">change sales by 6% / year during years 2025 to 2030
change domestic by -3% / year during years 2031 to 2035
change import by 5% / year during years 2025 to onwards</code></pre>
      </section>

      <section id="define">
        <h2>Define</h2>

        <p><strong>Purpose:</strong> Creates variables for use in calculations and conditional statements.</p>

        <p><strong>Syntax:</strong> <code>define variableName as value</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">define baseGrowthRate as 5
define phaseOutYear as 2030
define targetReduction as 80</code></pre>
      </section>

      <section id="enable">
        <h2>Enable</h2>

        <p><strong>Purpose:</strong> Activates specific supply streams for a substance.</p>

        <p><strong>Syntax:</strong> <code>enable streamName</code></p>

        <p><strong>Available Streams:</strong> domestic, import, export</p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">enable domestic
enable import
enable export</code></pre>
      </section>

      <section id="equals">
        <h2>Equals (GWP)</h2>

        <p><strong>Purpose:</strong> Defines the Global Warming Potential and energy consumption for a substance.</p>

        <p><strong>Syntax:</strong> <code>equals gwpValue [tCO2e|kgCO2e] / [mt|kg|unit] [energyValue kwh / unit]</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">equals 1430 tCO2e / mt
equals 1430 kgCO2e / kg
equals 675 kgCO2e / kg 100 kwh / unit
equals 3 tCO2e / mt</code></pre>

        <p><strong>Note:</strong> Both tCO2e (tonnes) and kgCO2e (kilograms) CO2 equivalent units are supported for GWP values.</p>
      </section>

      <section id="floor">
        <h2>Floor</h2>

        <p><strong>Purpose:</strong> Sets minimum consumption levels to prevent unrealistic reductions.</p>

        <p><strong>Syntax:</strong></p>
        <pre><code class="language-qubectalk">floor streamName to amount during years startYear to endYear
floor streamName to amount displacing "substanceName"|stream during years startYear to endYear
floor streamName to amount displacing by volume "substanceName"|stream during years startYear to endYear
floor streamName to amount displacing by units "substanceName"|stream during years startYear to endYear</code></pre>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">floor sales to 10% during years 2030 to onwards
floor domestic to 5 mt during years 2025 to 2035
floor import to 100 units displacing by units "R-600a" during years 2028 to 2032</code></pre>

        <p>Floor supports the same displacement types as Cap. See <a href="#cap">Cap</a> for detailed explanation of displacement behavior.</p>
      </section>

      <section id="get">
        <h2>Get</h2>

        <p><strong>Purpose:</strong> Retrieves values from streams for use in expressions and calculations.</p>

        <p><strong>Syntax:</strong> <code>get streamName [of "substanceName"] [as units]</code></p>

        <p><strong>Available Streams:</strong></p>
        <ul>
          <li><code>sales</code>, <code>domestic</code>, <code>import</code>, <code>export</code> - Sales and trade volumes</li>
          <li><code>equipment</code>, <code>priorEquipment</code>, <code>bank</code> - Equipment population</li>
          <li><code>age</code> - Weighted average equipment age (read-only, Advanced Editor only)</li>
        </ul>

        <p><strong>Indirect Access (Cross-substance):</strong></p>

        <p>The <code>of "substanceName"</code> option allows you to access stream values from other substances within the same application. This is useful for creating dependencies between substances.</p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk"># Direct stream access
define currentSales as get sales as kg
define equipmentAge as get age as years
retire (get age as years) * 1 % each year

# Age-dependent retirement example
define retirementRate as get age as years
retire retirementRate % each year during years 5 to onwards

# Cross-substance access with indirect option
define substanceADomestic as get domestic of "substance a" as kg
set domestic to (get domestic of "substance a" as kg) * 1.5 during year 1

# Unit conversion with indirect access
define substanceAInMT as get import of "substance a" as mt</code></pre>

        <p><strong>Note:</strong> The <code>age</code> stream is a computed value that tracks the weighted average age of equipment. It starts at 0 years for new equipment and increases annually. This feature is only available in the Advanced Editor.</p>
      </section>

      <section id="initial-charge">
        <h2>Initial Charge</h2>

        <p><strong>Purpose:</strong> Specifies the amount of substance in new equipment per unit.</p>

        <p><strong>Syntax:</strong> <code>initial charge with amount unit / unit for streamName</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">initial charge with 0.15 kg / unit for domestic
initial charge with 0.20 kg / unit for import
initial charge with 1.5 kg / unit for domestic</code></pre>
      </section>

      <section id="recharge">
        <h2>Recharge</h2>

        <p><strong>Purpose:</strong> Specifies servicing patterns for existing equipment including frequency and amount.</p>

        <p><strong>Syntax:</strong> <code>recharge percentage % with amount unit / unit</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">recharge 10% with 0.15 kg / unit
recharge 15% with 0.85 kg / unit during years 2025 to 2030
recharge 5% with 1.0 kg / unit in all years</code></pre>
      </section>

      <section id="recover">
        <h2>Recover</h2>

        <p><strong>Purpose:</strong> Implements recycling programs that recover and reuse substances from equipment.</p>

        <p><strong>Syntax:</strong> <code>recover percentage % with reuse_percentage % reuse [with induction_percentage % induction] [at stage] [displacing "substanceName"] during years startYear to endYear</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">recover 30% with 90% reuse during years 2027 to onwards
recover 50% with 80% reuse with 100% induction during years 2030 to 2035
recover 25% with 100% reuse with 0% induction at eol during years 2028 to onwards
recover 20% with 80% reuse with default induction at recharge during years 2026 to onwards
recover 15% with 85% reuse displacing "HFC-134a" during years 2025 to onwards</code></pre>

        <p><strong>Recycling Stages:</strong></p>
        <ul>
          <li><code>at recharge</code> - Recycling occurs during equipment servicing (default)</li>
          <li><code>at eol</code> - Recycling occurs during equipment retirement (end-of-life)</li>
        </ul>

        <p><strong>Induction Control:</strong></p>
        <ul>
          <li><code>with 0% induction</code> - Full displacement (recycled material reduces virgin demand)</li>
          <li><code>with 100% induction</code> - Full induced demand (recycled material adds to supply, recommended when uncertain)</li>
          <li><code>with 50% induction</code> - Mixed behavior (partial displacement)</li>
          <li><code>with default induction</code> - Uses system default based on specification type</li>
        </ul>
      </section>

      <section id="replace">
        <h2>Replace</h2>

        <p><strong>Purpose:</strong> Substitutes one substance with another in new equipment over specified time periods.</p>

        <p><strong>Syntax:</strong> <code>replace with "newSubstanceName" during years startYear to endYear</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">replace with "R-600a" during years 2027 to 2030
replace with "HFC-32" during years 2025 to onwards</code></pre>
      </section>

      <section id="retire">
        <h2>Retire</h2>

        <p><strong>Purpose:</strong> Sets equipment retirement rates determining equipment lifespan.</p>

        <p><strong>Syntax:</strong> <code>retire percentage % each year</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">retire 5% each year
retire 7% each year during years 2025 to 2030
retire 10% each year</code></pre>
      </section>

      <section id="set">
        <h2>Set</h2>

        <p><strong>Purpose:</strong> Sets consumption volumes or equipment units for specific streams and time periods.</p>

        <p><strong>Syntax:</strong> <code>set streamName to amount unit during year year</code></p>

        <p><strong>Examples:</strong></p>
        <pre><code class="language-qubectalk">set domestic to 25 mt during year 2025
set import to 15000 units during year 2025
set priorEquipment to 1000000 units during year 2025</code></pre>
      </section>

      <section id="navigation">
        <h2>See Also</h2>
        <ul>
          <li><a href="/guide/qubectalk_stanzas.html">QubecTalk Stanzas Reference</a></li>
          <li><a href="/guide/qubectalk_language_features.html">QubecTalk Language Features Reference</a></li>
          <li><a href="/guide">Return to Guide Index</a></li>
        </ul>
      </section>
    </main>

    <script src="/third_party/prism-core.min.js"></script>
    <script src="/third_party/prism-autoloader.min.js"></script>
    <script src="/guide/qubectalk-prism.js"></script>
  </body>
</html>