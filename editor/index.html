<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Kigali Sim</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" type="image/png" href="/style/icon.png" />
    <meta name="theme-color" content="#C0C0C0" />

    <!-- Social Share Meta Tags -->
    <meta property="og:title" content="Kigali Sim - Montreal Protocol Policy Simulator" />
    <meta property="og:type" content="website" />
    <meta
      property="og:description"
      content="Interactive tool for simulating Montreal Protocol and Kigali Amendment policy interventions. Explore impacts on emissions, consumption, and equipment across multiple scenarios."
    />
    <meta property="og:url" content="https://kigalisim.org" />
    <meta property="og:image" content="https://kigalisim.org/style/card.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Kigali Sim - Montreal Protocol Policy Simulator" />
    <meta
      name="twitter:description"
      content="Interactive tool for simulating Montreal Protocol and Kigali Amendment policy interventions. Explore impacts on emissions, consumption, and equipment across multiple scenarios."
    />
    <meta name="twitter:image" content="https://kigalisim.org/style/card.png" />

    <meta
      name="description"
      content="Kigali Sim is an interactive, open source tool for simulating Montreal Protocol and Kigali Amendment policy interventions. Explore impacts on emissions, consumption, and equipment."
    />
    <meta
      name="keywords"
      content="Montreal Protocol, Kigali Amendment, HFC, policy simulation, emissions modeling, refrigeration, climate"
    />
    <link href="/third_party/tabby-ui.min.css" rel="stylesheet" type="text/css" />
    <link href="/style/style.css?v=EPOCH" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <input type="hidden" id="app-version" value="EPOCH" />
    <a href="#kigali-sim-app" class="skip-link">Skip to main content</a>
    <header>
      <div class="beta-warning">
        This tool is under development and currently in beta testing. We would love to hear from
        you! Let us know your feedback at
        <a href="mailto:hello@kigalisim.org">hello@kigalisim.org</a> and we are
        here to help if you run into any issues. You are also very welcome to
        <a href="https://calendar.app.google/xqLF4DXWwPCC2js58" target="_blank"
          >book a time to meet with us</a
        >. See also our
        <a href="https://vimeo.com/1061085671?share=copy" target="_blank">getting help video</a>.
      </div>
      <h1>Kigali Sim</h1>
      <div class="file-buttons buttons-panel">
        <a href="#" id="new-file-button" class="secondary">New File</a>
        <a href="#" id="load-file-button" class="secondary">Load File</a>
        <a href="#" download="simulation.qta" id="save-file-button" class="secondary">Save File</a>
        <a href="/guide" class="secondary" target="_blank">Guide</a>
        <a href="/guide/get_help.html" class="secondary" id="get-help-button">Get Help</a>

        <dialog id="load-file-dialog">
          <h2>Open Analysis</h2>
          <p>Note that this will override code currently entered into the application.</p>
          <div><label for="upload-file">File (.qta recommended):</label></div>
          <div><input type="file" class="upload-file" id="upload-file" name="upload-file" /></div>
          <div class="dialog-buttons bold-buttons">
            <a href="#" class="load-button primary">Open</a>
            <a href="#" class="cancel-button destructive">Cancel</a>
          </div>
        </dialog>

        <dialog id="custom-emissions-dialog">
          <h2>Configure Custom Emissions Metric</h2>
          <p>Select which emission types to include in your custom metric:</p>
          <div class="checkbox-list">
            <div>
              <label><input type="checkbox" value="recharge" /> Recharge emissions</label>
            </div>
            <div>
              <label><input type="checkbox" value="eol" /> End of life emissions</label>
            </div>
            <div>
              <label><input type="checkbox" value="export" /> Export emissions</label>
            </div>
            <div class="future">
              <label><input type="checkbox" value="initial charge" /> Initial charge emissions (future)</label>
            </div>
          </div>
          <div class="dialog-buttons bold-buttons">
            <a href="#" class="primary">Apply</a>
            <a href="#" class="secondary">Cancel</a>
          </div>
        </dialog>

        <dialog id="custom-sales-dialog">
          <h2>Configure Custom Sales/Consumption Metric</h2>
          <p>Select which consumption types to include in your custom metric:</p>
          <div class="checkbox-list">
            <div>
              <label><input type="checkbox" value="domestic" /> Domestic</label>
            </div>
            <div>
              <label><input type="checkbox" value="import" /> Imports</label>
            </div>
            <div>
              <label><input type="checkbox" value="export" /> Exports</label>
            </div>
            <div>
              <label><input type="checkbox" value="recycle" /> Recycle</label>
            </div>
          </div>
          <div class="dialog-buttons bold-buttons">
            <a href="#" class="primary">Apply</a>
            <a href="#" class="secondary">Cancel</a>
          </div>
        </dialog>

        <dialog id="update-notice-dialog">
          <h2>Update Available</h2>
          <p>
            A new version of Kigali Sim is available!
          </p>
	  <p>
            Your current simulation changes have been saved automatically. You can reload now to use the latest version, or continue with the current version. The updated version will be automatically loaded on your next visit.
	  </p>
          <p>
            For more information about changes made, see the <a href="https://github.com/SchmidtDSE/kigali-sim/blob/main/beta_changelog.md" target="_blank">beta change log</a> on GitHub.
	  </p>
          <p id="up-to-date-message">
            Note: your software is showing as up to date but you may update anyway.
          </p>
          <div id="update-loading-indicator">
            <img src="/style/90-ring.svg" alt="Loading indicator" /> Please wait...
          </div>
          <div class="dialog-buttons bold-buttons">
            <a href="#" class="reload-button primary">Update Now</a>
            <a href="#" class="cancel-button destructive">Update Later</a>
          </div>
        </dialog>

        <dialog id="privacy-confirmation-dialog">
          <h2>Your Privacy is Protected</h2>
          <p>
            By default, no data or simulation configurations are shared with others, including the
            development team. All simulations and supporting simulation data are saved only within
            your computer, specifically inside your browser. Use the <strong>Save</strong> and
            <strong>Load</strong> buttons to store simulations long term and to send simulations to
            others.
          </p>
          <p>
            That said, if you would like our help, simulations can be sent to the University of
            California team using the <strong>Get Help</strong> feature. This can be used to
            facilitate support when you request it or provide feedback.
          </p>
		  <p>
			Except for the <strong>Get Help</strong> feature or directly sending a QTA file to us
			(like by email), we do not have visibility into your data or simulations. For more
			details, see our <a href="/privacy.html" target="_blank">Privacy Policy</a>.
          </p>
          <div class="dialog-buttons bold-buttons">
            <a href="#" class="close-button primary">Close</a>
          </div>
        </dialog>
      </div>
    </header>

    <main id="kigali-sim-app">
      <section id="loading">
	<h2><span aria-hidden="true">üëã</span> Welcome to Kigali Sim</h2>

        <p>
          Kigali Sim is an interactive, open source tool that simulates the possible outcomes of
          different policy interventions related to the Montreal Protocol and Kigali Amendment. It
          provides an easy to use interface where you can enter your country-level modeling data and
	  policies under consideration to quickly simulate potential impacts on emissions,
	  consumption, and equipment across multiple scenarios. This can be used to explore many
	  different substances like HFCs and sectors like commercial refrigeration.
        </p>

        <p>
          Kigali Sim was built to support those exploring Kigali Implementation Plans. It is offered
          as a free, open source project that prioritizes your agency and privacy. Our tool does not
          share your simulations and data with others including the tool's development team unless
          you specifically request it. You don't need to install anything to use Kigali Sim - it
          works in your web browser.
        </p>

        <p>
          We want to help and hear from you! If you have any questions, suggestions, requests, or
	  just want to talk to us about Kigali Sim, you can reach us at
	  hello@kigalisim.org.
        </p>

        <div class="check-preferences">
          <label>
            <input type="checkbox" id="privacy-confirmation-check" checked>
            üîí Data not shared or remotely stored
          </label>
          <label>
            <input type="checkbox" id="save-preferences-checkbox" checked>
            üíæ Save preferences and simulation locally
          </label>
          <label>
            <input type="checkbox" id="tooltip-preference-check" checked>
            ‚ÑπÔ∏è Show help tooltips
          </label>
        </div>

        <div id="initial-loading-indicator">
          <img src="/style/90-ring.svg" alt="Loading indicator" /> Loading please wait...
        </div>

        <div id="continue-buttons-panel" class="buttons-panel">
          <a href="#" id="continue-button" class="primary">Continue</a>
          <a href="#" id="continue-no-show-button" class="secondary"
            >Disable this Message</a
          >
          <a href="#" id="privacy-details-button" class="secondary">Privacy Details</a>
        </div>
      </section>

      <div id="main-holder">
        <section id="main">
          <section id="editor">
            <h2>Simulation</h2>
            <ul id="editor-tabs" data-tabs>
              <li><a data-tabby-default href="#ui-editor-pane" data-tippy-content="Develop your model through a &quot;user interface&quot; or, in other words, clicking buttons and filling out forms and wizards.">Designer</a></li>
              <li><a href="#code-editor-pane" data-tippy-content="Develop your model through code using the bespoke and easy to use QubecTalk programming language designed just for Kigali Sim.">Editor</a></li>
            </ul>
            <div id="ui-editor-pane">
              <div class="available-contents">
                <div class="ui-editor-sections">
                  <div class="ui-editor-section applications">
                    <h3>Applications</h3>
                    <ul class="item-list"></ul>
                    <div class="add-link-pane bold-buttons">
                      <a href="#add-application" class="add-link secondary" data-tippy-content="Add a new application where substances are consumed like commercial refrigeration. You may include sub-applications to indicate specific sectors.">Add Application</a>
                    </div>
                    <dialog class="dialog">
                      <h2><span class="action-title"></span> Application</h2>
                      <div class="instructions">
                        An application is a type of use which may be compatible with many different
                        substances. For example, an application may be "commercial ACs" for
                        commercial air conditioners.
                      </div>
                      <div class="contents">
                        <div class="form-group">
                          <div><label for="edit-application-name">Application:</label></div>
                          <div>
                            <input
                              type="text"
                              name="edit-application-name"
                              class="edit-application-name-input long"
                              autofocus
                            />
                          </div>
                        </div>
                        <div class="form-group">
                          <div>
                            <label for="edit-application-subname">Subapplication (optional):</label>
                          </div>
                          <div>
                            <input
                              type="text"
                              name="edit-application-subname"
                              class="edit-application-subname-input long"
                              autofocus
                            />
                          </div>
                        </div>
                      </div>
                      <div class="dialog-buttons bold-buttons">
                        <a href="#ui-editor-sections" class="save-button primary">Save</a>
                        <a href="#ui-editor-sections" class="cancel-button destructive">Cancel</a>
                      </div>
                    </dialog>
                  </div>

                  <div></div>

                  <div class="ui-editor-section consumption inactive">
                    <h3>Consumption</h3>
                    <ul class="item-list"></ul>
                    <div class="add-link-pane bold-buttons">
                      <a href="#add-consumption" class="add-link secondary" data-tippy-content="Add a new substance which is consumed within one of your applications. You may also include specific equipment models. One record per substance / application pair.">Add Consumption</a>
                    </div>
                    <dialog class="dialog">
                      <h2><span class="action-title"></span> Consumption</h2>
                      <div class="instructions">
                        A consumption records describes use of a single substance like HFC-134a in a
                        single application like domestic refrigeration.
                      </div>
                      <div class="contents">
                        <ul id="consumption-tabs" class="tabs" data-tabs>
                          <li><a data-tabby-default href="#consumption-general" data-tippy-content="Information about the substance being consumed including if it is imported, exported, and / or domestically manufactured.">General</a></li>
                          <li><a href="#consumption-equipment" data-tippy-content="Information about equipment using the substance including charge levels and optional equipment model information.">Equipment</a></li>
                          <li>
                            <a href="#consumption-servicing" data-tippy-content="Information about servicing schedules including top up and repair, both of which may change over time."
                              >Servicing (<span id="consumption-servicing-count">0</span>)</a
                            >
                          </li>
                          <li>
                            <a href="#consumption-start" data-tippy-content="Set points for sales / consumption values. May be used to specify historic or actual observed values."
                              >Set (<span id="consumption-set-count">0</span>)</a
                            >
                          </li>
                          <li>
                            <a href="#consumption-change" data-tippy-content="Information about how sales / consumption change over time. May be used to specify expectations based on surveys or socioeconomic projections."
                              >Change (<span id="consumption-change-count">0</span>)</a
                            >
                          </li>
                          <li>
                            <a href="#consumption-limit" data-tippy-content="Information about either minimum or maximum sales / consumption levels, possibly through time."
                              >Limit (<span id="consumption-limit-count">0</span>)</a
                            >
                          </li>
                        </ul>
                        <div id="consumption-general">
                          <div class="instructions">
                            Information about the substance and application being modeled.
                          </div>
                          <div class="form-group">
                            <div><label for="edit-consumption-substance">Substance:</label></div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-substance"
                                class="edit-consumption-substance-input long"
                                autofocus
                              />
                            </div>
                          </div>
                          <div class="form-group">
                            <div>
                              <label for="edit-consumption-application">Application:</label>
                            </div>
                            <div>
                              <span class="sel long">
                                <select
                                  id="edit-consumption-application"
                                  name="edit-consumption-application"
                                  class="edit-consumption-application-input application-select"
                                ></select>
                              </span>
                            </div>
                          </div>
                          <div class="form-group">
                            <div><label for="edit-consumption-ghg">GHG Equivalency:</label></div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-ghg"
                                class="edit-consumption-ghg-input mid"
                              />
                              <span class="sel mid">
                                <select
                                  name="edit-consumption-ghg-units"
                                  class="edit-consumption-ghg-units-input"
                                  aria-label="Units of GHG equivalency"
                                >
                                  <option value="tCO2e / unit">tCO2e / unit</option>
                                  <option value="tCO2e / kg">tCO2e / kg</option>
                                  <option value="tCO2e / mt">tCO2e / mt</option>
                                </select>
                              </span>
                            </div>
                          </div>
                          <div class="form-group">
                            <div>
                              <label for="edit-consumption-energy"
                                >Annual energy consumption:</label
                              >
                            </div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-energy"
                                class="edit-consumption-energy-input mid"
                              />
                              <span class="sel mid">
                                <select
                                  name="edit-consumption-energy-units"
                                  class="edit-consumption-energy-units-input"
                                  aria-label="Units of energy equivalency"
                                >
                                  <option value="kwh / unit">kWh / unit</option>
                                  <option value="kwh / kg">kWh / kg</option>
                                  <option value="kwh / mt">kWh / mt</option>
                                </select>
                              </span>
                            </div>
                          </div>
                          <div class="form-group">
                            <div><label>Enabled Streams:</label></div>
                            <div class="checkbox-list">
                              <div>
                                <label tabindex="0" data-tippy-content="Substance and / or equipment imported from outside the country."><input type="checkbox" name="enable-import" class="enable-import-checkbox" /> Import</label>
                              </div>
                              <div>
                                <label tabindex="0" data-tippy-content="Substance and / or equipment produced and consumed entirely within the country."><input type="checkbox" name="enable-domestic" class="enable-domestic-checkbox" /> Domestic</label>
                              </div>
                              <div>
                                <label tabindex="0" data-tippy-content="Substance and / or equipment produced within the country but then exported."><input type="checkbox" name="enable-export" class="enable-export-checkbox" /> Export</label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div id="consumption-equipment">
                          <div class="instructions">
                            Information about equipment that uses this substance for this
                            application.
                            <span class="scope-reminder">
                              You are describing equipment using
                              <span class="reminder-substance"></span> for
                              <span class="reminder-app"></span>.
                              <a href="#edit" class="edit-reminder-link">Change</a>
                            </span>
                          </div>
                          <div class="form-group">
                            <div>
                              <label for="edit-consumption-equipment">Equipment type / model (optional):</label>
                            </div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-equipment"
                                class="edit-consumption-equipment-input long"
                              />
                            </div>
                          </div>
                          <div
                            class="form-group edit-consumption-initial-charge-domestic-input-outer"
                          >
                            <div>
                              <label for="edit-consumption-initial-charge-domestic"
                                >Domestic manufacture equipment initial charge:</label
                              >
                            </div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-initial-charge-domestic"
                                class="edit-consumption-initial-charge-domestic-input mid"
                                data-lpignore="true"
                                data-protonpass-ignore="true"
                                data-1p-ignore
                              />
                              <span class="sel mid">
                                <select
                                  name="initial-charge-domestic-units"
                                  class="initial-charge-domestic-units-input"
                                  aria-label="Units of initial charge"
                                >
                                  <option value="kg">kg</option>
                                  <option value="mt">mt</option>
                                  <option value="tCO2e">tCO2e</option>
                                  <option value="units">units</option>
                                  <option value="kg / year">kg / year</option>
                                  <option value="mt / year">mt / year</option>
                                  <option value="tCO2e / year">tCO2e / year</option>
                                  <option value="units / year">units / year</option>
                                  <option value="kg / unit">kg / unit</option>
                                  <option value="mt / unit">mt / unit</option>
                                  <option value="tCO2e / unit">tCO2e / unit</option>
                                  <option value="tCO2e / kg">tCO2e / kg</option>
                                  <option value="tCO2e / mt">tCO2e / mt</option>
                                  <option value="%">%</option>
                                  <option value="% / year">% / year</option>
                                </select>
                              </span>
                            </div>
                          </div>
                          <div
                            class="form-group edit-consumption-initial-charge-import-input-outer"
                          >
                            <div>
                              <label for="edit-consumption-initial-charge-import"
                                >Imported equipment initial charge:</label
                              >
                            </div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-initial-charge-import"
                                class="edit-consumption-initial-charge-import-input mid"
                                data-lpignore="true"
                                data-protonpass-ignore="true"
                                data-1p-ignore
                              />
                              <span class="sel mid">
                                <select
                                  name="initial-charge-import-units"
                                  class="initial-charge-import-units-input"
                                  aria-label="Units of initial charge"
                                >
                                  <option value="kg">kg</option>
                                  <option value="mt">mt</option>
                                  <option value="tCO2e">tCO2e</option>
                                  <option value="units">units</option>
                                  <option value="kg / year">kg / year</option>
                                  <option value="mt / year">mt / year</option>
                                  <option value="tCO2e / year">tCO2e / year</option>
                                  <option value="units / year">units / year</option>
                                  <option value="kg / unit">kg / unit</option>
                                  <option value="mt / unit">mt / unit</option>
                                  <option value="tCO2e / unit">tCO2e / unit</option>
                                  <option value="tCO2e / kg">tCO2e / kg</option>
                                  <option value="tCO2e / mt">tCO2e / mt</option>
                                  <option value="%">%</option>
                                  <option value="% / year">% / year</option>
                                </select>
                              </span>
                            </div>
                          </div>
                          <div
                            class="form-group edit-consumption-initial-charge-export-input-outer"
                          >
                            <div>
                              <label for="edit-consumption-initial-charge-export"
                                >Exported equipment initial charge:</label
                              >
                            </div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-initial-charge-export"
                                class="edit-consumption-initial-charge-export-input mid"
                                data-lpignore="true"
                                data-protonpass-ignore="true"
                                data-1p-ignore
                              />
                              <span class="sel mid">
                                <select
                                  name="initial-charge-export-units"
                                  class="initial-charge-export-units-input"
                                  aria-label="Units of initial charge"
                                >
                                  <option value="kg">kg</option>
                                  <option value="mt">mt</option>
                                  <option value="tCO2e">tCO2e</option>
                                  <option value="units">units</option>
                                  <option value="kg / year">kg / year</option>
                                  <option value="mt / year">mt / year</option>
                                  <option value="tCO2e / year">tCO2e / year</option>
                                  <option value="units / year">units / year</option>
                                  <option value="kg / unit">kg / unit</option>
                                  <option value="mt / unit">mt / unit</option>
                                  <option value="tCO2e / unit">tCO2e / unit</option>
                                  <option value="tCO2e / kg">tCO2e / kg</option>
                                  <option value="tCO2e / mt">tCO2e / mt</option>
                                  <option value="%">%</option>
                                  <option value="% / year">% / year</option>
                                </select>
                              </span>
                            </div>
                          </div>
                          <div class="form-group">
                            <div>
                              <label for="edit-consumption-retirement"
                                >Amount of equipment retired annually:</label
                              >
                            </div>
                            <div>
                              <input
                                type="text"
                                name="edit-consumption-retirement"
                                class="edit-consumption-retirement-input mid"
                                data-lpignore="true"
                                data-protonpass-ignore="true"
                                data-1p-ignore
                              />
                              <span class="sel mid">
                                <select
                                  name="retirement-units"
                                  class="retirement-units-input"
                                  aria-label="Units of equipment annual retirement"
                                >
                                  <option value="kg">kg</option>
                                  <option value="mt">mt</option>
                                  <option value="tCO2e">tCO2e</option>
                                  <option value="units">units</option>
                                  <option value="kg / year">kg / year</option>
                                  <option value="mt / year">mt / year</option>
                                  <option value="tCO2e / year">tCO2e / year</option>
                                  <option value="units / year">units / year</option>
                                  <option value="kg / unit">kg / unit</option>
                                  <option value="mt / unit">mt / unit</option>
                                  <option value="tCO2e / unit">tCO2e / unit</option>
                                  <option value="tCO2e / kg">tCO2e / kg</option>
                                  <option value="tCO2e / mt">tCO2e / mt</option>
                                  <option value="%">%</option>
                                  <option value="% / year">% / year</option>
                                </select>
                              </span>
                            </div>
                          </div>
                        </div>
                        <div id="consumption-start">
                          <div class="instructions">
                            Substance levels at specific times. These typically describe initial
                            values for assessing consumption. For example, amount of import and
                            domestic manufacturing (both produced and consumed within the country)
                            at the start of the simulation. Note: use
                            <a href="#consumption-change" class="dialog-internal-link">change</a>
                            instead to describe relative changes over time.
                          </div>
                          <div class="dialog-list level-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-start-button secondary">Add Setpoint</a>
                          </div>
                          <div class="scope-reminder detached">
                            You are making set points for
                            <span class="reminder-substance"></span> used in
                            <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="consumption-change">
                          <div class="instructions">
                            How sales or consumption change over time like, for example, how much
                            domestic manufacture increases each year. While this sets streams to
                            change relatively over time, use
                            <a href="#consumption-start" class="dialog-internal-link">setpoints</a>
                            instead to have consumption, sales, etc be specific values at specific
                            times.
                          </div>
                          <div class="dialog-list change-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-change-button secondary">Add Change</a>
                          </div>
                          <div class="scope-reminder detached">
                            You are describing changes in
                            <span class="reminder-substance"></span> used for
                            <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="consumption-limit">
                          <div class="instructions">
                            Specify limits (minimum and maximum). Optionally, these limits can
                            displace other substances or streams. For example, in a 100 kg cap on
                            HFC-134a offsetting R-410A in domestic refrigeration, a cap would cause
                            150 kg of HFC-134a and 0 kg of R-410A to become 100 and 50 kg
                            respectively.
                          </div>
                          <div class="dialog-list limit-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-limit-button secondary">Add Limit</a>
                          </div>
                          <div class="scope-reminder detached">
                            You are limiting <span class="reminder-substance"></span> used for
                            <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="consumption-servicing">
                          <div class="instructions">
                            Specify multiple recharge operations for equipment servicing. This can be used for both "top up" 
                            operations (smaller amounts) and "repair" operations (amounts closer to initial charge). Multiple 
                            recharge commands can be specified per substance/application pair.
                          </div>
                          <div class="dialog-list recharge-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-recharge-button secondary">Add Recharge</a>
                          </div>
                          <div class="scope-reminder detached">
                            You are servicing <span class="reminder-substance"></span> used for
                            <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                      </div>
                      <div class="dialog-buttons bold-buttons">
                        <a href="#ui-editor-sections" class="save-button primary">Save</a>
                        <a href="#ui-editor-sections" class="cancel-button destructive">Cancel</a>
                      </div>
                    </dialog>
                  </div>

                  <div class="ui-editor-section policies inactive">
                    <h3>Policies</h3>
                    <ul class="item-list"></ul>
                    <div class="add-link-pane bold-buttons">
                      <a href="#add-policy" class="add-link secondary" data-tippy-content="Model a potential policy intervention which can be examined on its own or in combination with others. May also be used to create a set of expectations like an SSP scenario.">Add Policy</a>
                    </div>
                    <dialog class="dialog">
                      <h2><span class="action-title"></span> Policy</h2>
                      <div class="instructions">
                        Policies can modify substances within applications. They can also be
                        combined into a package tested in a simulation.
                      </div>
                      <div class="contents">
                        <ul id="policy-tabs" class="tabs" data-tabs>
                          <li><a data-tabby-default href="#policy-general" data-tippy-content="Information about the policy (or scenario) like name and impacted substance / application. For multi-substance policies, please use code-based editor.">General</a></li>
                          <li>
                            <a href="#policy-recycle" data-tippy-content="Describe recycling or salvage programs which collect substance either during servicing or top up."
                              >Recycle (<span id="policy-recycle-count">0</span>)</a
                            >
                          </li>
                          <li>
                            <a href="#policy-replace" data-tippy-content="Describe programs which replace one substance, application, or sales stream with an another. This can trade off between substances or sales channels such as trading imports for domestic manufacturing."
                              >Replace (<span id="policy-replace-count">0</span>)</a
                            >
                          </li>
                          <li>
                            <a href="#policy-set" data-tippy-content="Indicate values for sales or consumption at specific moments in time expected under this policy or scenario.">Set (<span id="policy-set-count">0</span>)</a>
                          </li>
                          <li>
                            <a href="#policy-change" data-tippy-content="Provide expectations for how sales or consumption are expected to change under the given policy or scenario, possibly moving consumption between policies or streams."
                              >Change (<span id="policy-change-count">0</span>)</a
                            >
                          </li>
                          <li>
                            <a href="#policy-limit" data-tippy-content="Specify minimum or maximum values for this substance / application pair. This can either draw on or send consumption to other sales streams, substances, or applications."
                              >Limit (<span id="policy-limit-count">0</span>)</a
                            >
                          </li>
                        </ul>
                        <div id="policy-general">
                          <div class="instructions">
                            Information about the name of the policy as well as its the target
                            substance and application. This is the substance being limited,
                            recycled, or replaced with something else.
                          </div>
                          <div class="form-group">
                            <div><label for="edit-policy-name">Name:</label></div>
                            <div>
                              <input
                                type="text"
                                name="edit-policy-name"
                                class="edit-policy-name-input long"
                                autofocus
                              />
                            </div>
                          </div>
                          <div class="form-group">
                            <div><label for="edit-policy-application">Application:</label></div>
                            <div>
                              <span class="sel long">
                                <select
                                  id="edit-policy-application"
                                  name="edit-policy-application"
                                  class="edit-policy-application-input application-select"
                                ></select>
                              </span>
                            </div>
                          </div>
                          <div class="form-group">
                            <div><label for="edit-policy-substance">Substance:</label></div>
                            <div>
                              <span class="sel long">
                                <select
                                  id="edit-policy-substance"
                                  name="edit-policy-substance"
                                  class="edit-policy-substance-input substances-select"
                                ></select>
                              </span>
                            </div>
                          </div>
                        </div>
                        <div id="policy-recycle">
                          <div class="instructions">
                            Define a recycling program in which substance is recovered during
                            servicing. There may be yield loss in processing substances prior to
                            reuse.
                          </div>
                          <div class="dialog-list recycling-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-recycling-button secondary">Add Recycling</a>
                          </div>
                          <div class="scope-reminder detached">
                            Your policy will recycle <span class="reminder-substance"></span> used
                            for <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="policy-replace">
                          <div class="instructions">
                            Specify replacement of the policy's target substance with another
                            compatible substance. For example, this could be used to model a
                            retrofit program.
                          </div>
                          <div class="dialog-list replace-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-replace-button secondary">Add Replacement</a>
                          </div>
                          <div class="scope-reminder detached">
                            Your policy will replace <span class="reminder-substance"></span> used
                            for <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="policy-set">
                          <div class="instructions">
                            Set streams such as imports or equipment to specific levels. These set
                            points could be used to model a mandate for a specific year. For
                            example, an import value set to 0 colud indicate a probition on foreign
                            HFC-134a.
                          </div>
                          <div class="dialog-list level-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-level-button secondary">Add Level</a>
                          </div>
                          <div class="scope-reminder detached">
                            Your policy will add set points
                            <span class="reminder-substance"></span> used for
                            <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="policy-change">
                          <div class="instructions">
                            Make relative changes to streams such as imports or equipment
                            continually over a period of time. For example, this could be used to
                            model a subsidy or incentive program.
                          </div>
                          <div class="dialog-list change-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-change-button secondary">Add Change</a>
                          </div>
                          <div class="scope-reminder detached">
                            Your policy will change <span class="reminder-substance"></span> used
                            for <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                        <div id="policy-limit">
                          <div class="instructions">
                            Impose limits like to overall sales in a specific application.
                            Optionally, these caps can displace other substances or streams. For
                            example, a 100 kg cap on A offsetting B would cause 150 kg of A and 0 kg
                            of B to become 100 and 50 kg respectively. For example, this could be
                            used to model a permit scheme like in domestic refrigeration.
                          </div>
                          <div class="dialog-list limit-list"></div>
                          <div class="dialog-sub-buttons bold-buttons">
                            <a href="#" class="add-limit-button secondary">Add Limit</a>
                          </div>
                          <div class="scope-reminder detached">
                            Your policy will limit <span class="reminder-substance"></span> used for
                            <span class="reminder-app"></span>.
                            <a href="#edit" class="edit-reminder-link">Change</a>
                          </div>
                        </div>
                      </div>
                      <div class="dialog-buttons bold-buttons">
                        <a href="#ui-editor-sections" class="save-button primary">Save</a>
                        <a href="#ui-editor-sections" class="cancel-button destructive">Cancel</a>
                      </div>
                    </dialog>
                  </div>

                  <div></div>

                  <div class="ui-editor-section simulations inactive">
                    <h3>Simulations</h3>
                    <ul class="item-list"></ul>
                    <div class="add-link-pane bold-buttons">
                      <a href="#add-simulation" class="add-link secondary" data-tippy-content="Add a new simulation which combines zero or more policies as stacked on top of the business as usual / baseline scenario.">Add Simulation</a>
                    </div>
                    <dialog class="dialog">
                      <h2><span class="action-title"></span> Simulation</h2>
                      <div class="instructions">
                        Simulations are collections of policies. If no policies are selected, this
                        will simulate business as usual (no policy interventions).
                      </div>
                      <div class="contents">
                        <div class="form-group">
                          <div><label for="edit-simulation-name">Name:</label></div>
                          <div>
                            <input
                              type="text"
                              name="edit-simulation-name"
                              class="edit-simulation-name-input long"
                              autofocus
                            />
                          </div>
                        </div>
                        <div class="form-group">
                          <div><label for="edit-simulation-start">Start year:</label></div>
                          <div>
                            <input
                              type="text"
                              name="edit-simulation-start"
                              class="edit-simulation-start-input long"
                            />
                          </div>
                        </div>
                        <div class="form-group">
                          <div><label for="edit-simulation-end">End year:</label></div>
                          <div>
                            <input
                              type="text"
                              name="edit-simulation-end"
                              class="edit-simulation-end-input long"
                            />
                          </div>
                        </div>
                        <div class="form-group">
                          <div><label for="edit-simulation-policies">Policies:</label></div>
                          <div class="dialog-list policy-sim-list small"></div>
                        </div>
                        <div class="dialog-buttons bold-buttons">
                          <a href="#ui-editor-sections" class="save-button primary">Save</a>
                          <a href="#ui-editor-sections" class="cancel-button destructive">Cancel</a>
                        </div>
                      </div>
                    </dialog>
                  </div>
                </div>
                <div class="advanced-link-pane">
                  Need more control? Switch to the
                  <a class="advanced-editor-link" href="#code-editor-pane" data-tippy-content="Develop your model through code using the bespoke and easy to use QubecTalk programming language designed just for Kigali Sim."
                    >code-based advanced editor</a
                  >.
                </div>
              </div>
              <div class="not-available-contents">
                The analysis you are currently working on uses features not available in the basic
                editor. Instead, switch to the
                <a class="advanced-editor-link" href="#code-editor-pane" data-tippy-content="Develop your model through code using the bespoke and easy to use QubecTalk programming language designed just for Kigali Sim."
                  >code-based advanced editor</a
                >.
              </div>
            </div>
            <div id="code-editor-pane">
              <div id="code-editor">
                <div id="code-editor-inner" class="inner"></div>
                <div class="error-display"></div>
              </div>
              <div id="code-buttons-panel" class="buttons-panel code-buttons-grid">
                <div id="available-panel">
                  <a class="primary" id="run-button" href="#loading">Run</a>
                </div>
                <div id="auto-run-panel">
                  <label for="auto-run-check">Automatically re-run when code is changed</label>
                  <input type="checkbox" id="auto-run-check" name="auto-run-check" checked />
                </div>
                <div id="loading">Loading please wait...</div>
              </div>
            </div>
          </section>
          <section id="results">
            <h2>Results</h2>

            <div id="running-indicator" class="running-indicator" style="display: none">
              <div class="running-overlay">
                <img src="/style/90-ring.svg" alt="Running indicator" />
                <div class="running-message">Running Simulations...</div>
                <progress id="simulation-progress" max="100" value="0"></progress>
              </div>
            </div>

            <div id="error-indicator" class="error-indicator" style="display: none">
              <div class="error-overlay">
                <div class="error-message">Simulation Error</div>
                <div class="error-details">
                  An error occurred while running the simulation. Please check your code and try
                  again.
                </div>
              </div>
            </div>

            <div id="no-results-message" class="no-results-message" style="display: none">
              <p>
                No results to display. This likely means no simulations were defined in the code.
              </p>
            </div>

            <div class="scorecards" id="scorecards">
              <div class="scorecard" id="emissions-scorecard">
                <div class="label">
                  <label for="emissions-radio" tabindex="0" data-tippy-content="Emissions from equipment in service in the simulated country, optionally with future emissions from exports."
                    ><input
                      id="emissions-radio"
                      class="metric-radio"
                      type="radio"
                      name="metric"
                      value="emissions"
                    />
                    Emissions</label
                  >
                </div>
                <div class="value"></div>
                <div class="submetric">
                  <div class="sel">
                    <select
                      name="emissions-submetric"
                      class="emissions-submetric submetric-input"
                      aria-label="Type of emissions to display"
                    >
                      <option value="recharge" selected>recharge</option>
                      <option value="eol">end of life</option>
                      <option value="export">export</option>
                      <option value="initial charge">initial charge (future emissions)</option>
                      <option value="custom">custom</option>
                    </select>
                  </div>
                  <div class="sel">
                    <select
                      name="emissions-units"
                      class="emissions-units units-input"
                      aria-label="Units to use in display"
                    >
                      <option value="tCO2e / year">tCO2e / year</option>
                      <option value="ktCO2e / year">ktCO2e / year</option>
                      <option value="MtCO2e / year" selected>MtCO2e / year</option>
                    </select>
                  </div>
                </div>
                <div class="scorecard-custom-link">
                  <a href="#" class="configure-custom-link">configure custom</a>
                </div>
              </div>

              <div></div>

              <div class="scorecard inactive" id="sales-scorecard">
                <div class="label">
                  <label for="sales-radio" tabindex="0" data-tippy-content="Consumption in sales or servicing: kg / mt or tCO2e. Follows configured trade attribution rules."
                    ><input
                      id="sales-radio"
                      class="metric-radio"
                      type="radio"
                      name="metric"
                      value="sales"
                      checked="checked"
                    />
                    Consumption</label
                  >
                </div>
                <div class="value"></div>
                <div class="submetric">
                  <div class="sel">
                    <select
                      name="sales-submetric"
                      class="sales-submetric submetric-input"
                      aria-label="Type of sales / consumption to display"
                    >
                      <option value="domestic" selected>domestic</option>
                      <option value="import">imports</option>
                      <option value="export">exports</option>
                      <option value="recycle">recycle</option>
                      <option value="custom">custom</option>
                    </select>
                  </div>
                  <div class="sel">
                    <select
                      name="sales-units"
                      class="sales-units units-input"
                      aria-label="Units to use in display of sales / consumption"
                    >
                      <option value="kg / year">kg / year</option>
                      <option value="mt / year" selected>mt / year</option>
                      <option value="tCO2e / year">tCO2e / year</option>
                      <option value="ktCO2e / year">ktCO2e / year</option>
                      <option value="MtCO2e / year">MtCO2e / year</option>
                    </select>
                  </div>
                </div>
                <div class="scorecard-custom-link">
                  <a href="#" class="configure-custom-link">configure custom</a>
                </div>
              </div>

              <div></div>

              <div class="scorecard inactive" id="population-scorecard">
                <div class="label">
                  <label for="population-radio" tabindex="0" data-tippy-content="Population and energy consumption for all equipment in service within the simulated country."
                    ><input
                      id="population-radio"
                      class="metric-radio"
                      type="radio"
                      name="metric"
                      value="population"
                    />
                     Population</label
                  >
                </div>
                <div class="value"></div>
                <div class="submetric">
                  <div class="sel">
                    <select
                      name="equipment-submetric"
                      class="equipment-submetric submetric-input"
                      aria-label="Type of equipment to display"
                    >
                      <option value="all" selected>total</option>
                      <option value="new">new</option>
                    </select>
                  </div>
                  <div class="sel">
                    <select
                      name="equipment-units"
                      class="equipment-units units-input"
                      aria-label="Units to use in display of sales / consumption"
                    >
                      <option value="units">units</option>
                      <option value="thousand units">thousand units</option>
                      <option value="million units" selected>million units</option>
                      <option value="kwh / year">kWh / year</option>
                      <option value="mwh / year">MWh / year</option>
                      <option value="gwh / year">GWh / year</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div id="center-chart-holder">
              <div id="top-chart-title">
                Showing
                <span class="sel mid">
                  <select class="metric-select" aria-label="Metric selection dropdown menu">
                    <option value="emissions">Emissions</option>
                    <option value="sales">Consumption</option>
                    <option value="population">Equipment (Population)</option>
                  </select>
                </span>
                summed by
                <span class="sel mid">
                  <select class="dimension-select" aria-label="Dimension selection dropdown menu">
                    <option value="simulations">Simulation Scenario</option>
                    <option value="applications">Applications</option>
                    <option value="substances">Substances</option>
                  </select>
                </span>
                as
                <span class="sel"><select class="baseline-select"></select></span>.
              </div>
              <canvas
                class="center-chart"
                id="center-chart"
                aria-describedby="top-chart-title"
              ></canvas>
              <div id="bottom-chart-title">
                Filter for
                <span class="sel mid"><select class="scenario-select"></select></span>
                <span class="sel mid"><select class="application-select"></select></span>
                <span class="sel mid"><select class="substance-select"></select></span>
                .
              </div>
            </div>

            <div class="dimensions" id="dimensions">
              <div class="dimension" id="simulations-dimension">
                <div class="title">
                  <label for="simulations-radio"
                    ><input
                      id="simulations-radio"
                      class="dimension-radio"
                      type="radio"
                      name="dimension"
                      value="simulations"
                      checked="checked"
                    />
                    <span class="dimension-label">Simulations</span></label
                  >
                </div>
                <div class="list"></div>
                <div class="axis">
                  <div class="left-tick">0</div>
                  <div class="units-tick-parent">
                    <div class="units-tick"></div>
                    <div class="years-tick"></div>
                  </div>
                  <div class="right-tick"></div>
                </div>
              </div>

              <div></div>

              <div class="dimension inactive" id="applications-dimension">
                <div class="title">
                  <label for="applications-radio"
                    ><input
                      id="applications-radio"
                      class="dimension-radio"
                      type="radio"
                      name="dimension"
                      value="applications"
                    />
                    <span class="dimension-label">Applications</span></label
                  >
                </div>
                <div class="list"></div>
                <div class="axis">
                  <div class="left-tick">0</div>
                  <div class="units-tick-parent">
                    <div class="units-tick"></div>
                    <div class="years-tick"></div>
                  </div>
                  <div class="right-tick"></div>
                </div>
              </div>

              <div></div>

              <div class="dimension inactive" id="substances-dimension">
                <div class="title">
                  <label for="substances-radio"
                    ><input
                      id="substances-radio"
                      class="dimension-radio"
                      type="radio"
                      name="dimension"
                      value="substances"
                    />
                    <span class="dimension-label">Substances</span></label
                  >
                </div>
                <div class="list"></div>
                <div class="axis">
                  <div class="left-tick">0</div>
                  <div class="units-tick-parent">
                    <div class="units-tick"></div>
                    <div class="years-tick"></div>
                  </div>
                  <div class="right-tick"></div>
                </div>
              </div>
            </div>

            <div class="options-panel" tabindex="0" data-tippy-content="Attribute the initial charge consumption volume to the importer if checked (useful for some policy / modeling contexts) and exporter if unchecked (typical Montreal Protocol accounting). Emissions are always shown as total (both importer and exporter together).">
              <input
                type="checkbox"
                name="importer-assignment-check"
                id="importer-assignment-check"
              />
              <label for="importer-assignment-check">Attribute initial charge consumption to importer</label>
            </div>

            <div class="buttons-panel" ="export-panel">
              <a class="primary" download="export.csv" id="export-button" href="#export"
                >Export Spreadsheet</a
              >
            </div>
          </section>
        </section>
      </div>
    </main>
    <footer>
      <div class="file-buttons buttons-panel">
        <a href="#" id="privacy-terms-button" class="secondary">Privacy / Terms</a>
        <a href="https://github.com/SchmidtDSE/montreal-protocol" target="_blank" class="secondary"
          >Open Source</a
        >
        <a href="#" id="clear-data-button" class="secondary">Clear Data</a>
        <a href="#" id="tooltip-toggle-button" class="secondary">Enable Tooltips</a>
        <a href="/kigalisim-fat.jar" class="secondary" download>Download Jar</a>
        <a href="#" id="force-update-button" class="secondary">Update</a>
      </div>
    </footer>

    <script type="text/template" id="set-command-template">
      <div class="set-command form-group">
        Set
        <span class="sel long">
          <select class="set-target-input" aria-label="Target for set command">
            <option value="sales">all sales</option>
            <option value="domestic">domestic</option>
            <option value="import">import</option>
            <option value="export">export</option>
            <option value="equipment">equipment</option>
            <option value="priorEquipment">prior equipment</option>
          </select>
        </span>
        <span class="embed-reminder">
          of
          <span class="embed-substance-label"></span>
          (<span class="embed-app-label"></span>)
        </span>
        to
        <input type="text" class="set-amount-input short" aria-label="Amount for set command">
        <span class="sel mid">
          <select class="set-units-input" aria-label="Units for set command">
            <option value="kg">kg</option>
            <option value="mt">mt</option>
            <option value="tCO2e">tCO2e</option>
            <option value="units">units</option>
            <option value="kg / year">kg / year</option>
            <option value="mt / year">mt / year</option>
            <option value="tCO2e / year">tCO2e / year</option>
            <option value="units / year">units / year</option>
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="tCO2e / kg">tCO2e / kg</option>
            <option value="tCO2e / mt">tCO2e / mt</option>
            <option value="%">%</option>
            <option value="% / year">% / year</option>
          </select>
        </span>
        <span class="duration-subcomponent">
          <span class="sel mid">
            <select class="duration-type-input" aria-label="Duration type for command">
              <option value="in year">in year</option>
              <option value="during all years">during all years</option>
              <option value="starting in year">starting in year</option>
              <option value="ending in year">ending in year</option>
              <option value="during years">during years</option>
            </select>
          </span>
          <input type="text" class="duration-start short" aria-label="Start year of substance import">
          <span class="duration-to">to</span>
          <input type="text" class="duration-end short" aria-label="End year of substance import"> .
        </span>
        - <a href="#" class="delete-command-link">delete</a>
      </div>
    </script>

    <script type="text/template" id="change-command-template">
      <div class="change-command form-group">
        <div>
          Change
            <span class="sel long">
              <select class="change-target-input" aria-label="Target for change command">
                <option value="sales">all sales</option>
                <option value="domestic">domestic</option>
                <option value="import">import</option>
                <option value="export">export</option>
                <option value="equipment">equipment</option>
                <option value="priorEquipment">prior equipment</option>
              </select>
            </span>
          <span class="embed-reminder">
            of
            <span class="embed-substance-label"></span>
            (<span class="embed-app-label"></span>)
          </span>
          by
        </div>
        <span class="sel short">
          <select class="change-sign-input" aria-label="Sign of substance change">
            <option value="+">+</option>
            <option value="-">-</option>
          </select>
        </span>
        <input type="text" class="change-amount-input short" aria-label="Change amount">
        <span class="sel mid">
          <select class="change-units-input" aria-label="Units of change">
            <option value="kg">kg</option>
            <option value="mt">mt</option>
            <option value="tCO2e">tCO2e</option>
            <option value="units">units</option>
            <option value="kg / year">kg / year</option>
            <option value="mt / year">mt / year</option>
            <option value="tCO2e / year">tCO2e / year</option>
            <option value="units / year">units / year</option>
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="tCO2e / kg">tCO2e / kg</option>
            <option value="tCO2e / mt">tCO2e / mt</option>
            <option value="%">%</option>
            <option value="% / year">% / year</option>
          </select>
        </span>
        <span class="duration-subcomponent">
          <span class="sel mid">
            <select class="duration-type-input" aria-label="Duration type for command">
              <option value="in year">in year</option>
              <option value="during all years">during all years</option>
              <option value="starting in year">starting in year</option>
              <option value="ending in year">ending in year</option>
              <option value="during years">during years</option>
            </select>
          </span>
          <input type="text" class="duration-start short" aria-label="Start year of substance import">
          <span class="duration-to">to</span>
          <input type="text" class="duration-end short" aria-label="End year of substance import"> .
        </span>
        - <a href="#" class="delete-command-link">delete</a>
      </div>
    </script>

    <script type="text/template" id="limit-command-template">
      <div class="limit-command form-group">
        <span class="sel mid">
          <select class="limit-type-input" aria-label="Type of limit command">
            <option value="cap">cap</option>
            <option value="floor">floor</option>
          </select>
        </span>
        <span class="sel long">
          <select class="limit-target-input" aria-label="Target for limit command">
            <option value="sales">all sales</option>
            <option value="domestic">domestic</option>
            <option value="import">import</option>
            <option value="export">export</option>
            <option value="equipment">equipment</option>
            <option value="priorEquipment">prior equipment</option>
          </select>
        </span>
        <span class="embed-reminder">
          of
          <span class="embed-substance-label"></span>
          (<span class="embed-app-label"></span>)
        </span>
        at
        <input type="text" class="limit-amount-input short" aria-label="Amount of limit">
        <span class="sel mid">
          <select class="limit-units-input" aria-label="Units of limit">
            <option value="kg">kg</option>
            <option value="mt">mt</option>
            <option value="tCO2e">tCO2e</option>
            <option value="units">units</option>
            <option value="kg / year">kg / year</option>
            <option value="mt / year">mt / year</option>
            <option value="tCO2e / year">tCO2e / year</option>
            <option value="units / year">units / year</option>
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="tCO2e / kg">tCO2e / kg</option>
            <option value="tCO2e / mt">tCO2e / mt</option>
            <option value="%">%</option>
            <option value="% / year">% / year</option>
          </select>
        </span>
        displacing
        <span class="sel mid">
          <select class="displacing-input" aria-label="The source of displacement to meet limit">
            <optgroup label="None">
              <option value="">nothing</option>
            </optgroup>
            <optgroup label="Streams">
              <option value="sales">all sales</option>
              <option value="domestic">domestic</option>
              <option value="import">import</option>
              <option value="export">export</option>
              <option value="equipment">equipment</option>
              <option value="priorEquipment">prior equipment</option>
            </optgroup>
            <optgroup class="substances-select" label="Substances">
            </optgroup>
          </select>
        </span>
        <span class="duration-subcomponent">
          <span class="sel mid">
            <select class="duration-type-input" aria-label="Duration type for command">
              <option value="in year">in year</option>
              <option value="during all years">during all years</option>
              <option value="starting in year">starting in year</option>
              <option value="ending in year">ending in year</option>
              <option value="during years">during years</option>
            </select>
          </span>
          <input type="text" class="duration-start short" aria-label="Start year of substance import">
          <span class="duration-to">to</span>
          <input type="text" class="duration-end short" aria-label="End year of substance import"> .
        </span>
        - <a href="#" class="delete-command-link">delete</a>
      </div>
    </script>

    <script type="text/template" id="recycle-command-template">
      <div class="recycle-command form-group">
        Recover
        <input type="text" class="recycle-amount-input short" aria-label="Amount for recycle command">
        <span class="sel mid">
          <select class="recycle-units-input" aria-label="Units for recycle command">
            <option value="kg">kg</option>
            <option value="mt">mt</option>
            <option value="tCO2e">tCO2e</option>
            <option value="units">units</option>
            <option value="kg / year">kg / year</option>
            <option value="mt / year">mt / year</option>
            <option value="tCO2e / year">tCO2e / year</option>
            <option value="units / year">units / year</option>
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="tCO2e / kg">tCO2e / kg</option>
            <option value="tCO2e / mt">tCO2e / mt</option>
            <option value="%">%</option>
            <option value="% / year">% / year</option>
          </select>
        </span>
        <span class="embed-reminder">
          of
          <span class="embed-substance-label"></span>
          (<span class="embed-app-label"></span>)
        </span>
        with
        <input type="text" class="recycle-reuse-amount-input short" aria-label="Reuse level after yield loss for recycle command">
        <span class="sel mid">
          <select class="recycle-reuse-units-input" aria-label="Units for reuse level after yield loss">
            <option value="kg">kg</option>
            <option value="mt">mt</option>
            <option value="tCO2e">tCO2e</option>
            <option value="units">units</option>
            <option value="kg / year">kg / year</option>
            <option value="mt / year">mt / year</option>
            <option value="tCO2e / year">tCO2e / year</option>
            <option value="units / year">units / year</option>
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="tCO2e / kg">tCO2e / kg</option>
            <option value="tCO2e / mt">tCO2e / mt</option>
            <option value="%">%</option>
            <option value="% / year">% / year</option>
          </select>
        </span>
        reuse at
        <span class="sel mid">
          <select class="recycle-stage-input" aria-label="Stage for recycle command">
            <option value="recharge">recharge (servicing)</option>
            <option value="eol">end of life</option>
          </select>
        </span>
        <span style="display: none;">
          displacing
          <span class="sel mid">
            <select class="displacing-input" aria-label="The source of displacement for recover command">
              <optgroup label="None">
                <option value="">nothing</option>
              </optgroup>
              <optgroup label="Streams">
                <option value="sales">all sales</option>
                <option value="domestic">domestic</option>
                <option value="import">import</option>
                <option value="export">export</option>
                <option value="equipment">equipment</option>
                <option value="priorEquipment">prior equipment</option>
              </optgroup>
              <optgroup class="substances-select" label="Substances">
              </optgroup>
            </select>
          </span>
        </span>
        <span class="duration-subcomponent">
          <span class="sel mid">
            <select class="duration-type-input" aria-label="Duration type for command">
              <option value="in year">in year</option>
              <option value="during all years">during all years</option>
              <option value="starting in year">starting in year</option>
              <option value="ending in year">ending in year</option>
              <option value="during years">during years</option>
            </select>
          </span>
          <input type="text" class="duration-start short" aria-label="Start year of substance import">
          <span class="duration-to">to</span>
          <input type="text" class="duration-end short" aria-label="End year of substance import"> .
        </span>
        - <a href="#" class="delete-command-link">delete</a>
      </div>
    </script>

    <script type="text/template" id="replace-command-template">
      <div class="replace-command form-group">
        Replace
        <input type="text" class="replace-amount-input short" aria-label="Amount for replace command">
        <span class="sel mid">
          <select class="replace-units-input" aria-label="Units for replace command">
            <option value="kg">kg</option>
            <option value="mt">mt</option>
            <option value="tCO2e">tCO2e</option>
            <option value="units">units</option>
            <option value="kg / year">kg / year</option>
            <option value="mt / year">mt / year</option>
            <option value="tCO2e / year">tCO2e / year</option>
            <option value="units / year">units / year</option>
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="tCO2e / kg">tCO2e / kg</option>
            <option value="tCO2e / mt">tCO2e / mt</option>
            <option value="%">%</option>
            <option value="% / year">% / year</option>
          </select>
        </span>
        <span class="embed-reminder">
          of
          <span class="embed-substance-label"></span>
          (<span class="embed-app-label"></span>)
        </span>
        <span class="sel long">
          <select class="replace-target-input" aria-label="Target for replace command">
            <option value="sales">all sales</option>
            <option value="domestic">domestic</option>
            <option value="import">import</option>
            <option value="export">export</option>
            <option value="equipment">equipment</option>
            <option value="priorEquipment">prior equipment</option>
          </select>
        </span>
        with
        <span class="sel long">
          <select class="replace-replacement-input substances-select" aria-label="Replacement substance for replace command">
          </select>
        </span>
        <span class="duration-subcomponent">
          <span class="sel mid">
            <select class="duration-type-input" aria-label="Duration type for command">
              <option value="in year">in year</option>
              <option value="during all years">during all years</option>
              <option value="starting in year">starting in year</option>
              <option value="ending in year">ending in year</option>
              <option value="during years">during years</option>
            </select>
          </span>
          <input type="text" class="duration-start short" aria-label="Start year of substance import">
          <span class="duration-to">to</span>
          <input type="text" class="duration-end short" aria-label="End year of substance import"> .
        </span>
        - <a href="#" class="delete-command-link">delete</a>
      </div>
    </script>

    <script type="text/template" id="recharge-command-template">
      <div class="recharge-command form-group">
        Recharge
        <input type="text" class="recharge-population-input short" placeholder="5" aria-label="Population to recharge">
        <span class="sel mid">
          <select class="recharge-population-units-input" aria-label="Population units">
            <option value="%">%</option>
            <option value="% / year">% / year</option>
            <option value="units">units</option>
            <option value="units / year">units / year</option>
          </select>
        </span>
        with
        <input type="text" class="recharge-volume-input short" placeholder="0.85" aria-label="Recharge volume">
        <span class="sel mid">
          <select class="recharge-volume-units-input" aria-label="Volume units">
            <option value="kg / unit">kg / unit</option>
            <option value="mt / unit">mt / unit</option>
            <option value="tCO2e / unit">tCO2e / unit</option>
            <option value="kwh / unit">kwh / unit</option>
          </select>
        </span>
        <span class="duration-subcomponent">
          <span class="sel mid">
            <select class="duration-type-input" aria-label="Duration type for command">
              <option value="in year">in year</option>
              <option value="during all years">during all years</option>
              <option value="starting in year">starting in year</option>
              <option value="ending in year">ending in year</option>
              <option value="during years">during years</option>
            </select>
          </span>
          <input type="text" class="duration-start short" aria-label="Start year of recharge">
          <span class="duration-to">to</span>
          <input type="text" class="duration-end short" aria-label="End year of recharge"> .
        </span>
        - <a href="#" class="delete-command-link">delete</a>
      </div>
    </script>

    <script type="text/javascript" src="/third_party/ace.min.js"></script>
    <script type="text/javascript" src="/js/ace-mode-qubectalk.js"></script>
    <script type="text/javascript" src="/third_party/ext-language_tools.js"></script>
    <script type="text/javascript" src="/third_party/ext-options.js"></script>
    <script type="text/javascript" src="/third_party/ext-prompt.js"></script>
    <script type="text/javascript" src="/third_party/ext-searchbox.js"></script>

    <script type="text/javascript" src="/third_party/chart.min.js"></script>
    <script type="text/javascript" src="/third_party/d3.min.js"></script>
    <script type="text/javascript" src="/third_party/tabby.min.js"></script>
    <script type="text/javascript" src="/third_party/popper.min.js"></script>
    <script type="text/javascript" src="/third_party/tippy-bundle.umd.min.js"></script>

    <script type="text/javascript" src="/intermediate/static/qubectalk.js?v=EPOCH"></script>

    <script type="importmap">
      {
        "imports": {
          "code_editor": "./js/code_editor.js?v=EPOCH",
          "engine_const": "./js/engine_const.js?v=EPOCH",
          "engine_number": "./js/engine_number.js?v=EPOCH",
          "engine_struct": "./js/engine_struct.js?v=EPOCH",
          "local_storage_keeper": "./js/local_storage_keeper.js?v=EPOCH",
          "main": "./js/main.js?v=EPOCH",
          "report_data": "./js/report_data.js?v=EPOCH",
          "results": "./js/results.js?v=EPOCH",
          "storage_keeper": "./js/storage_keeper.js?v=EPOCH",
          "ui_editor": "./js/ui_editor.js?v=EPOCH",
          "ui_translator": "./js/ui_translator.js?v=EPOCH",
          "updates": "./js/updates.js?v=EPOCH",
          "user_config": "./js/user_config.js?v=EPOCH",
          "wasm_backend": "./js/wasm_backend.js?v=EPOCH",
          "year_matcher": "./js/year_matcher.js?v=EPOCH"
        }
      }
    </script>

    <script type="module">
      import {main} from "main";
      main();
    </script>

    <script type="text/javascript" src="/js/sw_load.js"></script>
  </body>
</html>
