<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Montreal Policy Simulation</title>
  <link href="/third_party/tabby-ui.min.css" rel="stylesheet" type="text/css" />
  <link href="/style/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <header>
    <h1>Montreal Policy Simulation</h1>
    Online open source / open science engine for business as usual and policy simulation on HFCs. This webpage enables exploration and analysis of potential outcomes for multiple substances and applications under different scenarios.
  </header>

  <main>
    <section id="editor">
      <h2>Editor</h2>
      <ul id="editor-tabs" data-tabs>
        <li><a data-tabby-default href="#ui-editor-pane">Basic</a></li>
        <li><a href="#code-editor-pane">Advanced</a></li>
      </ul>
      <div id="ui-editor-pane">
        <div class="available-contents">
          <div class="ui-editor-sections">
            <div class="ui-editor-section applications">
              <h3>Applications</h3>
              <ul></ul>
              <div class="add-link-pane"><a href="#add-application" class="add-link">Add Application</a></div>

              <dialog class="dialog">
                <h2><span class="action-title"></span> Application</h2>
                <div class="instructions">
                  An application is a type of use which may use many different subtances. For example, an application may be "commerical ACs" for commerical air conditioners.
                </div>
                <div>
                  <div><label for="edit-application-name">Name:</label></div>
                  <div><input type="text" name="edit-application-name" class="edit-application-name-input" autofocus></div>
                </div>
                <div class="dialog-buttons">
                  <a href="#ui-editor-sections" class="save-button">Save</a>
                  <a href="#ui-editor-sections" class="cancel-button">Cancel</a>
                </div>
              </dialog>
            </div>
            <div></div>
            <div class="ui-editor-section substances inactive">
              <h3>Substances</h3>
              <ul></ul>
              <div class="add-link-pane"><a href="#add-substance" class="add-link">Add Substance</a></div>
            </div>
            <div class="ui-editor-section policies inactive">
              <h3>Policies</h3>
              <ul></ul>
              <div class="add-link-pane"><a href="#add-policy" class="add-link">Add Policy</a></div>
            </div>
            <div></div>
            <div class="ui-editor-section simulations inactive">
              <h3>Simulations</h3>
              <ul></ul>
              <div class="add-link-pane"><a href="#add-simulation" class="add-link">Add Simulation</a></div>
            </div>
          </div>
          <div class="advanced-link-pane">
            Need more control? Switch to the <a class="advanced-editor-link" href="#code-editor-pane">code-based advanced editor</a>.
          </div>
        </div>
        <div class="not-available-contents">
          The analysis you are currently working on uses features not available in the basic editor. Instead, switch to the <a class="advanced-editor-link" href="#code-editor-pane">code-based advanced editor</a>.
        </div>
      </div>
      <div id="code-editor-pane">
        <div id="code-editor">
          <div id="code-editor-inner" class="inner"></div>
          <div class="error-display"></div>
        </div>
        <div id="buttons-panel">
          <div id="available-panel">
            <a class="primary" id="run-button" href="#loading">Run</a>
          </div>
          <div id="loading">
            Loading please wait...
          </div>
        </div>
      </div>
    </section>
    <section id="results">
      <h2>Results</h2>

      <div class="scorecards" id="scorecards">
        <div class="scorecard" id="emissions-scorecard">
          <div class="label">
            <label for="emissions-radio"><input id="emissions-radio" class="metric-radio" type="radio" name="metric" value="emissions" checked="checked"> Emissions</label>
          </div>
          <div class="value"></div>
          <div class="units">MtCO2e / yr <span class="current-year"></span></div>
        </div>

        <div></div>
        
        <div class="scorecard inactive" id="sales-scorecard">
          <div class="label">
            <label for="sales-radio"><input id="sales-radio" class="metric-radio" type="radio" name="metric" value="sales"> Sales</label>
          </div>
          <div class="value"></div>
          <div class="units">mt / yr <span class="current-year"></span></div>
        </div>

        <div></div>

        <div class="scorecard inactive" id="equipment-scorecard">
          <div class="label">
            <label for="population-radio"><input id="population-radio" class="metric-radio" type="radio" name="metric" value="population"> Equipment</label>
          </div>
          <div class="value"></div>
          <div class="units">units <span class="current-year"></span></div>
        </div>
      </div>

      <div id="center-chart-holder">
        <div id="top-chart-title">
          Showing
          <span class="sel">
            <select class="metric-select" aria-label="Metric selection dropdown menu">
              <option value="emissions">Emissions</option>
              <option value="sales">Sales</option>
              <option value="population">Equipment (Population)</option>
            </select>
          </span>
          summed by
          <span class="sel">
            <select class="dimension-select" aria-label="Dimension selection dropdown menu">
              <option value="simulations">Simulation Scenario</option>
              <option value="applications">Applications</option>
              <option value="substances">Substances</option>
            </select>
          </span>
          .
        </div>
        <canvas class="center-chart" id="center-chart" aria-describedby="top-chart-title"></canvas>
        <div id="bottom-chart-title">
          Filter for
          <span class="sel"><select class="scenario-select"></select></span>
          <span class="sel"><select class="application-select"></select></span>
          <span class="sel"><select class="substance-select"></select></span>
          .
        </div>
      </div>

      <div class="dimensions" id="dimensions">
        <div class="dimension" id="simulations-dimension">
          <div class="title">
            <label for="simulations-radio"><input id="simulations-radio" class="dimension-radio" type="radio" name="dimension" value="simulations" checked="checked"> Simulations</label>
          </div>
          <div class="list"></div>
          <div class="axis">
            <div class="left-tick">0</div>
            <div class="units-tick-parent">
              <div class="units-tick"></div>
              <div class="years-tick"></div>
            </div>
            <div class="right-tick"></div>
          </div>
        </div>

        <div></div>

        <div class="dimension inactive" id="applications-dimension">
          <div class="title">
            <label for="applications-radio"><input id="applications-radio" class="dimension-radio" type="radio" name="dimension" value="applications"> Applications</label>
          </div>
          <div class="list"></div>
          <div class="axis">
            <div class="left-tick">0</div>
            <div class="units-tick-parent">
              <div class="units-tick"></div>
              <div class="years-tick"></div>
            </div>
            <div class="right-tick"></div>
          </div>
        </div>

        <div></div>

        <div class="dimension inactive" id="substances-dimension">
          <div class="title">
            <label for="substances-radio"><input id="substances-radio" class="dimension-radio" type="radio" name="dimension" value="substances"> Substances</label>
          </div>
          <div class="list"></div>
          <div class="axis">
            <div class="left-tick">0</div>
            <div class="units-tick-parent">
              <div class="units-tick"></div>
              <div class="years-tick"></div>
            </div>
            <div class="right-tick"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script type="text/javascript" src="/third_party/ace.min.js"></script>
  <script type="text/javascript" src="/third_party/ext-language_tools.js"></script>
  <script type="text/javascript" src="/third_party/ext-options.js"></script>
  <script type="text/javascript" src="/third_party/ext-prompt.js"></script>
  <script type="text/javascript" src="/third_party/ext-searchbox.js"></script>
  
  <script type="text/javascript" src="/third_party/chart.min.js"></script>
  <script type="text/javascript" src="/third_party/d3.min.js"></script>
  <script type="text/javascript" src="/third_party/tabby.min.js"></script>

  <script type="text/javascript" src="/intermediate/static/qubectalk.js"></script>

  <script type="importmap">
    {
      "imports": {
        "code_editor": "./js/code_editor.js?v=EPOCH",
        "compiler": "./js/compiler.js?v=EPOCH",
        "engine_const": "./js/engine_const.js?v=EPOCH",
        "engine_number": "./js/engine_number.js?v=EPOCH",
        "engine_state": "./js/engine_state.js?v=EPOCH",
        "engine": "./js/engine.js?v=EPOCH",
        "main": "./js/main.js?v=EPOCH",
        "report_data": "./js/report_data.js?v=EPOCH",
        "results": "./js/results.js?v=EPOCH",
        "ui_editor": "./js/ui_editor.js?v=EPOCH",
        "ui_translator": "../js/ui_translator.js?v=EPOCH"
      }
    }
  </script>

  <script type="module">
    import { main } from "main";
    main();
  </script>
</body>

</html>